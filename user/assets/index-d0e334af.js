import{au as T,av as U,y as j,z as n,aw as G,ax as W,ay as _,D as B,N as F,az as Z,j as e,H as L,a as i,c as a,J as l,Y as I,Z as q,i as P,K as M,aA as J,g as D,B as K,T as d,aB as g,A as C,e as Y,I as Q,aC as X,s as $,as as ee,P as re,C as te}from"./index-a3673b34.js";import{r as c}from"./warn-once-32b7c465.js";import{L as ae}from"./LogoOnlyLayout-589cdf04.js";import{R as ie,E as se}from"./RHFTelInput-d8f2bdaa.js";import{C as z}from"./CardContent-73270362.js";const A={alphabet:/^[a-zA-Z /s]+$/,number:/^\d+$/,alphaNumeric:/^[a-zA-Z0-9 /s]+$/},ne=r=>se(r);let V,O,k,E="";function oe(){const{onSuccess:r,registerData:o}=c.useContext(N),[u]=T(),h=u.get("referral_id")??"",{register:x}=U(),[t,f]=c.useState(!1),p=j().shape({referralId:n().required("Referral Id is required").test("validReferralId","Referral Id doesn't exist",async(s,v)=>(s!==V&&(V=s,O=await G(s,v,H=>{R("referralUsername",H)})),O)),userName:n().required("Username is required").max(15,"Maximum 15 characters are allowed").test("userName","Username is not allowed",async(s,v)=>(s!==k&&(k=s,E=await W(s,v)),E)),firstName:n().required("First name is required").max(10,"Maximum 10 characters are allowed").matches(A.alphabet,"Only alphabets are allowed"),lastName:n().required("Last name is required").matches(A.alphabet,"Only alphabets are allowed").max(10,"Maximum 10 characters are allowed"),mobileNumber:n().required("Mobile Number is required").test("Phone","Mobile Number is not valid",ne),email:n().email("Email must be a valid email address").required("Email is required"),password:n().required("Password is required").min(6,"Password must be at least 6 characters long").max(20,"Maximum 20 characters are allowed"),confirmPassword:n().required("Password is required").oneOf([_("password"),null],"Passwords are not matching")}),m={step:1,referralId:h,referralUsername:"",userName:"",firstName:"",lastName:"",mobileNumber:"",email:"",password:"",confirmPassword:""},w=B({resolver:F(p),defaultValues:m,mode:"onChange",reValidateMode:"onChange"}),{reset:S,setValue:R,handleSubmit:y,formState:{isSubmitting:b}}=w;return c.useEffect(()=>{Z(o)||S(o)},[]),e(L,{methods:w,onSubmit:y(async s=>{try{await x(s),r(s)}catch(v){console.error(v)}}),children:i(a,{container:!0,spacing:2,children:[e(a,{item:!0,xs:12,md:6,children:e(l,{name:"referralId",label:"Referral Id"})}),e(a,{item:!0,xs:12,md:6,children:e(l,{disabled:!0,name:"referralUsername",label:"Referral Username"})}),e(a,{item:!0,xs:12,md:6,children:e(l,{name:"userName",label:"Username"})}),e(a,{item:!0,xs:12,md:6,children:e(l,{name:"firstName",label:"First Name"})}),e(a,{item:!0,xs:12,md:6,children:e(l,{name:"lastName",label:"Last Name"})}),e(a,{item:!0,xs:12,md:6,children:e(ie,{name:"mobileNumber",label:"Mobile Number"})}),e(a,{item:!0,xs:12,md:6,children:e(l,{name:"email",label:"Email"})}),e(a,{item:!0,xs:12,md:6,children:e(l,{name:"password",label:"Password",type:t?"text":"password",InputProps:{endAdornment:e(I,{position:"end",children:e(q,{edge:"end",onClick:()=>f(!t),children:e(P,{icon:t?"eva:eye-fill":"eva:eye-off-fill"})})})}})}),e(a,{item:!0,xs:12,md:6,children:e(l,{name:"confirmPassword",label:"Confirm Password",type:t?"text":"password",InputProps:{endAdornment:e(I,{position:"end",children:e(q,{edge:"end",onClick:()=>f(!t),children:e(P,{icon:t?"eva:eye-fill":"eva:eye-off-fill"})})})}})}),e(a,{item:!0,xs:12,children:e(M,{fullWidth:!0,size:"large",type:"submit",variant:"contained",loading:b,children:"Register"})})]})})}const le=()=>{const{appName:r}=J();return e(D,{children:i(z,{sx:{p:{md:6}},children:[i(K,{sx:{mb:5,display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",textAlign:"center"},children:[e(d,{variant:"h4",gutterBottom:!0,children:"Get started absolutely free"}),i(d,{sx:{color:"text.secondary"},children:["Create an account to continue with ",r]})]}),e(oe,{}),i(d,{variant:"body2",align:"center",sx:{color:"text.secondary",mt:3},children:["By registering, I agree to Â ",e(g,{href:C.termsAndCondition,underline:"always",color:"text.primary",target:"_blank",children:"Terms of Service"})," ","and"," ",e(g,{href:C.privacyPolicy,underline:"always",color:"text.primary",target:"_blank",children:"Privacy Policy"}),"."]}),i(d,{variant:"body2",sx:{mt:3,textAlign:"center"},children:["Already have an account?"," ",e(g,{variant:"subtitle2",to:C.login,component:Y,children:"Login"})]})]})})},de=()=>{const{registerData:r,onGoBack:o,onRegister:u}=c.useContext(N),{register:h}=U(),[x,t]=c.useState(!1),f=j().shape({verificationCode:n().required("Verification Code is required").length(6,"Verification Code is invalid")}),p=B({defaultValues:{verificationCode:"",step:2},resolver:F(f)}),{formState:{isSubmitting:m},handleSubmit:w}=p,S=async y=>{try{const b=await h({...r,...y});u(b)}catch(b){console.log("ðŸš€ ~ file: RegisterVerifyOtp.jsx:31 ~ onSubmit ~ error",b)}},R=async()=>{try{t(!0),await h(r)}catch(y){console.log("ðŸš€ ~ file: RegisterVerifyOtp.jsx:43 ~ handleResendOtp ~ error",y)}finally{t(!1)}};return e(D,{sx:{maxWidth:600,marginInline:"auto",p:{xs:2,md:6}},children:i(z,{sx:{textAlign:"center",display:"flex",justifyContent:"center",flexDirection:"column",alignItems:"center",gap:2},children:[e(Q,{src:"https://jamsrworld.com/demo/binary-mlm/assets/media/svg/misc/smartphone-2.svg",sx:{width:200}}),e(d,{variant:"h4",children:"Otp Verification"}),e(d,{color:"text.secondary",children:"Enter the verification code sent to "}),e(d,{children:r==null?void 0:r.email}),i(L,{methods:p,onSubmit:w(S),children:[e(X,{name:"verificationCode",label:"Otp"}),e(M,{type:"submit",sx:{mt:2},loading:m,variant:"contained",size:"large",fullWidth:!0,children:"Verify"})]}),i(d,{sx:{color:"text.secondary"},variant:"body2",children:["Didn't get the code?"," ",x?e(g,{sx:{cursor:"pointer",opacity:.7},children:"Sending..."}):e(g,{onClick:R,sx:{cursor:"pointer"},children:"Resend"})]}),i(g,{onClick:o,sx:{cursor:"pointer",alignItems:"center",display:"inline-flex"},variant:"subtitle2",children:[e(P,{sx:{width:16,height:16},icon:"eva:arrow-ios-back-fill"}),"Change Email"]})]})})},ce=$("div")(({theme:r})=>({[r.breakpoints.up("md")]:{display:"flex"}})),me=$("div")(({theme:r})=>({maxWidth:900,margin:"auto",display:"flex",minHeight:"100vh",flexDirection:"column",justifyContent:"center"})),N=c.createContext(),ue=()=>{const r=ee(),[o,u]=c.useState(1),[h,x]=c.useState({}),t=m=>{x(m),u(2)},f=()=>u(1),p=m=>{r(C.registrationSuccess(m))};return e(re,{title:"Register",children:i(ce,{children:[e(ae,{}),e(te,{sx:{p:0},children:e(me,{children:e(N.Provider,{value:{onSuccess:t,onGoBack:f,onRegister:p,step:o,registerData:h},children:o===1?e(le,{}):e(de,{})})})})]})})},be=ue;export{be as default};
