import{$ as M,Z as W,E as G,_ as w,a0 as k,a1 as P,e,a2 as F,a3 as H,M as J,j as i,F as de,S as j,T as $e,l as A,I as R,c3 as Me,p as ue,R as v,aP as We,c as U,a as y,c4 as $,d as pe,o as me,D as Ge,h as he,g as ke,i as Pe,aD as f,m as Fe,B as ye,L as _,u as He,bn as Ie,s as Ne,bd as Oe,t as L,w as De,P as Ae,z as Be,J as D,C as K,bc as Z,c5 as Ee,bl as Y,aI as Le,f as ee,c6 as Ue,A as te,c7 as _e,c8 as je}from"./index-7ce534fb.js";import{r as b}from"./warn-once-223a138d.js";import{H as Xe}from"./HeaderBreadcrumbs-7dcdcbac.js";import{u as ze,m as Qe}from"./useFormRepeater-4850cb5d.js";import{d as Ve,a as Je}from"./CheckBoxOutlineBlank-2eb2fc00.js";import{a as Ke,b as X,A as Ze,T as g}from"./TableCell-b673782b.js";import{C as ae}from"./CardHeader-51eb309e.js";import{C as Ye}from"./CardContent-d5c47145.js";import{c as oe}from"./index-2e108c35.js";import"./HTMLProjectionNode-1401ff63.js";import"./jsx-runtime_commonjs-proxy-e24ef60d.js";import"./Close-40502a6a.js";function et(t){return M("MuiTable",t)}W("MuiTable",["root","stickyHeader"]);const tt=["className","component","padding","size","stickyHeader"],at=t=>{const{classes:a,stickyHeader:o}=t;return H({root:["root",o&&"stickyHeader"]},et,a)},ot=G("table",{name:"MuiTable",slot:"Root",overridesResolver:(t,a)=>{const{ownerState:o}=t;return[a.root,o.stickyHeader&&a.stickyHeader]}})(({theme:t,ownerState:a})=>w({display:"table",width:"100%",borderCollapse:"collapse",borderSpacing:0,"& caption":w({},t.typography.body2,{padding:t.spacing(2),color:(t.vars||t).palette.text.secondary,textAlign:"left",captionSide:"bottom"})},a.stickyHeader&&{borderCollapse:"separate"})),re="table",rt=b.forwardRef(function(a,o){const r=k({props:a,name:"MuiTable"}),{className:s,component:n=re,padding:l="normal",size:c="medium",stickyHeader:d=!1}=r,p=P(r,tt),u=w({},r,{component:n,padding:l,size:c,stickyHeader:d}),T=at(u),I=b.useMemo(()=>({padding:l,size:c,stickyHeader:d}),[l,c,d]);return e(Ke.Provider,{value:I,children:e(ot,w({as:n,role:n===re?null:"table",ref:o,className:F(T.root,s),ownerState:u},p))})}),st=rt;function nt(t){return M("MuiTableBody",t)}W("MuiTableBody",["root"]);const it=["className","component"],lt=t=>{const{classes:a}=t;return H({root:["root"]},nt,a)},ct=G("tbody",{name:"MuiTableBody",slot:"Root",overridesResolver:(t,a)=>a.root})({display:"table-row-group"}),dt={variant:"body"},se="tbody",ut=b.forwardRef(function(a,o){const r=k({props:a,name:"MuiTableBody"}),{className:s,component:n=se}=r,l=P(r,it),c=w({},r,{component:n}),d=lt(c);return e(X.Provider,{value:dt,children:e(ct,w({className:F(d.root,s),as:n,ref:o,role:n===se?null:"rowgroup",ownerState:c},l))})}),pt=ut;function mt(t){return M("MuiTableContainer",t)}W("MuiTableContainer",["root"]);const ht=["className","component"],yt=t=>{const{classes:a}=t;return H({root:["root"]},mt,a)},bt=G("div",{name:"MuiTableContainer",slot:"Root",overridesResolver:(t,a)=>a.root})({width:"100%",overflowX:"auto"}),wt=b.forwardRef(function(a,o){const r=k({props:a,name:"MuiTableContainer"}),{className:s,component:n="div"}=r,l=P(r,ht),c=w({},r,{component:n}),d=yt(c);return e(bt,w({ref:o,as:n,className:F(d.root,s),ownerState:c},l))}),ft=wt;function vt(t){return M("MuiTableHead",t)}W("MuiTableHead",["root"]);const Ct=["className","component"],gt=t=>{const{classes:a}=t;return H({root:["root"]},vt,a)},Tt=G("thead",{name:"MuiTableHead",slot:"Root",overridesResolver:(t,a)=>a.root})({display:"table-header-group"}),xt={variant:"head"},ne="thead",Rt=b.forwardRef(function(a,o){const r=k({props:a,name:"MuiTableHead"}),{className:s,component:n=ne}=r,l=P(r,Ct),c=w({},r,{component:n}),d=gt(c);return e(X.Provider,{value:xt,children:e(Tt,w({as:n,className:F(d.root,s),ref:o,role:n===ne?null:"rowgroup",ownerState:c},l))})}),St=Rt;function qt(t){return M("MuiTableRow",t)}const $t=W("MuiTableRow",["root","selected","hover","head","footer"]),ie=$t,Mt=["className","component","hover","selected"],Wt=t=>{const{classes:a,selected:o,hover:r,head:s,footer:n}=t;return H({root:["root",o&&"selected",r&&"hover",s&&"head",n&&"footer"]},qt,a)},Gt=G("tr",{name:"MuiTableRow",slot:"Root",overridesResolver:(t,a)=>{const{ownerState:o}=t;return[a.root,o.head&&a.head,o.footer&&a.footer]}})(({theme:t})=>({color:"inherit",display:"table-row",verticalAlign:"middle",outline:0,[`&.${ie.hover}:hover`]:{backgroundColor:(t.vars||t).palette.action.hover},[`&.${ie.selected}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:J(t.palette.primary.main,t.palette.action.selectedOpacity),"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.hoverOpacity}))`:J(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity)}}})),le="tr",kt=b.forwardRef(function(a,o){const r=k({props:a,name:"MuiTableRow"}),{className:s,component:n=le,hover:l=!1,selected:c=!1}=r,d=P(r,Mt),p=b.useContext(X),u=w({},r,{component:n,hover:l,selected:c,head:p&&p.variant==="head",footer:p&&p.variant==="footer"}),T=Wt(u);return e(Gt,w({as:n,ref:o,className:F(T.root,s),role:n===le?null:"row",ownerState:u},d))}),ce=kt,Pt=({watch:t})=>{const{fields:a,resetFieldArray:o,onAddField:r,onRemoveField:s}=ze({name:"dropdownOptions",append:{option:""}});return i(de,{children:[i(j,{direction:"row",justifyContent:"space-between",alignItems:"center",children:[e($e,{children:"Options"}),e(A,{onClick:()=>r(),color:"success",variant:"contained",children:e(R,{icon:"material-symbols:add"})})]}),a.map((n,l)=>i(Me,{children:[e(Ft,{onRemoveField:s,index:l}),";"]},l))]})};function Ft({onRemoveField:t,index:a}){return e(Qe.div,{initial:{y:-100,opacity:0},animate:{y:0,opacity:1},exit:{y:-100,opacity:0},transition:{duration:.4},children:i(ue,{sx:{display:"flex",alignItems:"center",gap:2},children:[e(v,{name:`dropdownOptions.${a}.option`,label:"Add Label",variant:"standard"}),e(A,{onClick:()=>t(a),color:"error",variant:"contained",children:e(R,{icon:"ri:close-fill"})})]},a)})}const Ht=e(Ve,{fontSize:"small"}),It=e(Je,{fontSize:"small"});function Nt({name:t,setFileExtensions:a}){return e(Ze,{multiple:!0,options:Ot,disableCloseOnSelect:!0,getOptionLabel:o=>o,renderOption:(o,r,{selected:s})=>i("li",{...o,children:[e(We,{icon:Ht,checkedIcon:It,style:{marginRight:8},checked:s}),r]}),onChange:(o,r)=>a(r),style:{width:500},renderInput:o=>e(v,{name:t,...o,label:"File Extensions",variant:"standard"})})}const Ot=["JPG","JPEG","PNG","WEBP","PDF","DOC","DOCX","TXT","XLX","XLSX","CSV"],Dt=({details:t,editId:a,onSuccess:o,open:r,onClose:s})=>{const n={label:"",required:"",inputType:"",fileExtensions:[],dropdownOptions:[{option:""}]},l=U().shape({label:y().required("Label is required"),required:y().required("Required is required"),inputType:y().required("Input Type is required"),fileExtensions:$().when("inputType",m=>{if(m==="file")return $().min(1,"File Extensions is required")}),dropdownOptions:$().when("inputType",m=>{if(m==="dropdown")return $().of(U().shape({option:y().required("Option is required")})).min(1,"One Option is required")})}),c=pe({defaultValues:n,resolver:me(l)}),{handleSubmit:d,reset:p,watch:u,setValue:T,control:I}=c,N=m=>{o(m),p(),s()};b.useEffect(()=>{const m=t==null?void 0:t[a];p(m||n)},[a]);const O=u("inputType"),x=m=>{T("fileExtensions",m)};return e(Ge,{open:r,onClose:s,children:i(he,{methods:c,onSubmit:d(N),children:[e(ke,{gutterBottom:!0,children:"Create New Withdraw Detail"}),e(Pe,{children:i(j,{spacing:2,children:[e(v,{name:"label",label:"Label",variant:"standard"}),i(v,{select:!0,name:"required",label:"Required",variant:"standard",children:[e(f,{value:"optional",children:"Optional"}),e(f,{value:"required",children:"Required"})]}),i(v,{select:!0,name:"inputType",label:"Input Type",variant:"standard",children:[e(f,{value:"input",children:"Input"}),e(f,{value:"textarea",children:"TextArea"}),e(f,{value:"dropdown",children:"Dropdown"}),e(f,{value:"file",children:"File"}),e(f,{value:"date",children:"Date"})]}),O==="file"&&e(Nt,{setFileExtensions:x,name:"fileExtensions"}),O==="dropdown"&&e(de,{children:e(Pt,{})})]})}),i(Fe,{children:[e(ye,{sx:{textTransform:"uppercase"},onClick:s,children:"Cancel"}),e(_,{type:"submit",sx:{textTransform:"uppercase"},children:"Create"})]})]})})},Kt=()=>{const t=He(),a=Ie(),o=Ne(),r=Oe(),{id:s=0}=a,n=async()=>await je(s),l=L.GetWithdrawGateway,{refetch:c,isLoading:d,isSuccess:p,data:u}=De([l,s],n,{enabled:!1}),T={gatewayId:0,logo:"",name:"",processingTime:"",minWithdraw:"",maxWithdraw:"",charge:"",chargeType:"",status:"",details:[]},I=U().shape({logo:y().required("Gateway Image is required"),name:y().required("Gateway Name is required"),processingTime:y().required("Processing Time is required"),minWithdraw:y().required("Minimum Withdraw is required"),maxWithdraw:y().required("Maximum Withdraw is required"),charge:y().required("Withdraw Charge is required"),chargeType:y().required("Withdraw Charge Type is required"),status:y().required("Status is required"),details:$().min(1,"Minimum 1 detail is  Required")}),N=pe({defaultValues:T,resolver:me(I)}),{reset:O,setValue:x,watch:m,handleSubmit:be,formState:{isSubmitting:we}}=N,fe=async h=>{try{await Ue(h),o.removeQueries([L.GetWithdrawGatewayList]),o.removeQueries([l]),t(te.paymentGateways.withdraw)}catch(C){console.log("ðŸš€ ~ file: CreateWithdrawGateway.jsx:43 ~ onSubmit ~ error",C)}};b.useEffect(()=>{u!=null&&u.data&&O(u==null?void 0:u.data),s>0&&!p&&c()},[s,u]);const[ve,B]=b.useState(!1),S=m("details"),Ce=h=>{const C=S.filter((V,q)=>q!==h);x("details",C)},[E,z]=b.useState(null),ge=h=>{B(!0),z(h)},Te=()=>B(!0),xe=()=>{z(null),B(!1)},Re=h=>{if(typeof E=="number"){const C=[...S];C[E]=h,x("details",C)}else x("details",[...S,h])},[Se,Q]=b.useState(!1),qe=async()=>{try{await r({description:"Are you sure you want to delete?"}),Q(!0),await _e(s),o.removeQueries([L.GetWithdrawGatewayList]),o.removeQueries([l]),t(te.paymentGateways.withdraw)}catch(h){console.log("ðŸš€ ~ file: CreateWithdrawGateway.jsx:139 ~ deleteGateway ~ error",h)}finally{Q(!1)}};return i(Ae,{title:"Create Withdraw Gateway",children:[e(Xe,{heading:"Create Withdraw Gateway",links:[{name:"Payment Gateways"},{name:"Withdraw Gateways"}]}),d&&s?e(Be,{}):i(ue,{children:[e(Dt,{details:S,editId:E,onSuccess:Re,open:ve,onClose:xe}),e(he,{methods:N,onSubmit:be(fe),children:i(D,{container:!0,spacing:4,children:[e(D,{item:!0,xs:12,md:5,children:i(K,{children:[e(ae,{title:"Details"}),e(Z,{}),e(Ye,{children:i(j,{spacing:4,children:[e(Ee,{setValue:x,name:"logo"}),e(v,{name:"name",label:"Gateway Name"}),e(v,{name:"processingTime",label:"Processing Time"}),e(v,{maskCurrency:!0,name:"minWithdraw",label:"Minimum Withdraw"}),e(v,{maskCurrency:!0,name:"maxWithdraw",label:"Maximum Withdraw"}),e(v,{maskNumber:!0,name:"charge",label:"Withdraw Charge"}),i(Y,{name:"chargeType",label:"Withdraw Charge Type",children:[e(f,{value:"fixed",children:"Fixed"}),e(f,{value:"percent",children:"Percent"})]}),i(Y,{name:"status",label:"Status",children:[e(f,{value:"active",children:"Active"}),e(f,{value:"inactive",children:"Inactive"})]})]})})]})}),e(D,{item:!0,xs:12,md:7,children:i(K,{children:[e(ae,{title:"Payment Requirements",action:e(ye,{onClick:Te,startIcon:e(R,{icon:"material-symbols:add"}),children:"Add New"})}),e(Z,{}),e(ft,{component:Le,children:i(st,{children:[e(St,{children:i(ce,{children:[e(g,{children:"Label"}),e(g,{children:"Required"}),e(g,{children:"Type"}),e(g,{children:"Action"})]})}),e(pt,{children:S.map(({label:h,required:C,inputType:V},q)=>i(ce,{children:[e(g,{component:"th",scope:"row",children:h}),e(g,{children:oe(C)}),e(g,{children:oe(V)}),i(g,{children:[e(A,{onClick:()=>Ce(q),color:"error",children:e(R,{icon:ee.delete})}),e(A,{onClick:()=>ge(q),color:"success",children:e(R,{icon:ee.pencil})})]})]},q))})]})})]})}),i(D,{display:"flex",item:!0,xs:12,children:[!!s&&e(_,{loading:Se,onClick:qe,startIcon:e(R,{icon:"mdi:trash"}),color:"error",variant:"contained",children:"Delete"}),e(_,{type:"submit",sx:{ml:"auto"},variant:"contained",size:"large",loading:we,children:"Submit"})]})]})})]})]})};export{Kt as default};
