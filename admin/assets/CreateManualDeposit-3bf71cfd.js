import{j as a,C as v,e,l as k,I as d,bc as C,S as u,R as l,bk as z,F as K,B as F,c3 as U,bd as J,bn as O,u as _,s as W,t as f,w as X,c as S,a as r,c4 as Y,d as Z,x as ee,P as ae,z as ie,p as te,h as re,J as p,c5 as se,bl as P,aD as h,L as I,o as ne,cd as le,A as T,ce as oe,cf as ce}from"./index-7ce534fb.js";import{r as y}from"./warn-once-223a138d.js";import{H as de}from"./HeaderBreadcrumbs-7dcdcbac.js";import{m as ue,u as me}from"./useFormRepeater-4850cb5d.js";import{C as w}from"./CardHeader-51eb309e.js";import{C as q}from"./CardContent-d5c47145.js";import"./HTMLProjectionNode-1401ff63.js";const pe=({index:s,onRemove:n,setValue:i})=>a(v,{children:[e(w,{title:"Details",action:e(k,{onClick:n,children:e(d,{icon:"carbon:delete"})})}),e(C,{}),e(q,{children:a(u,{spacing:2,children:[e(l,{name:`details.${s}.label`,label:"Label"}),e(z,{name:`details.${s}.value`,accept:"image/*",setValue:i})]})})]}),he=({type:s,onRemoveField:n,index:i,setValue:c})=>e(ue.div,{initial:{y:-100,opacity:0},animate:{y:0,opacity:1},exit:{y:-100,opacity:0},transition:{duration:.4},children:s==="input"?a(v,{children:[e(w,{title:"Details",action:e(k,{onClick:()=>n(i),children:e(d,{icon:"carbon:delete"})})}),e(C,{}),e(q,{children:a(u,{spacing:2,children:[e(l,{name:`details.${i}.label`,label:"Label"}),e(l,{name:`details.${i}.value`,label:"Value"})]})})]}):e(pe,{index:i,setValue:c,onRemove:()=>n(i)})}),ye=({setValue:s})=>{const{fields:n,onAddField:i,onRemoveField:c}=me({name:"details",append:{label:"",value:"",type:"input"}});return a(K,{children:[a(u,{direction:"row",justifyContent:"flex-end",children:[a(F,{onClick:()=>i({label:"",value:"",type:"input"}),children:[e(d,{icon:"carbon:add"}),"Add New Label"]}),a(F,{onClick:()=>i({label:"",value:"",type:"image"}),children:[e(d,{icon:"carbon:add"}),"Add New Image"]})]}),n.map(({type:m,id:o},t)=>e(U,{children:e(he,{setValue:s,type:m,onRemoveField:c,index:t})},o))]})},qe=()=>{const s=J(),n=O(),i=_(),[c,m]=y.useState(!1),o=W(),{id:t=0}=n,A=y.useMemo(()=>[],[]),g=f.GetManualDepositGatewayDetails,{data:{data:D=A}={},isLoading:L,refetch:H}=X([g,t],()=>ce(t),{enabled:!1}),G=t?t>0:!1,j={gatewayId:t,logo:"",name:"",processingTime:"",minDeposit:"",maxDeposit:"",charge:"",chargeType:"",status:"",details:[]},R=S().shape({logo:r().required("Gateway Image is required"),name:r().required("Gateway Name is required"),processingTime:r().required("Processing Time is required"),minDeposit:r().required("Minimum Deposit is required"),maxDeposit:r().required("Maximum Deposit is required"),charge:r().required("Deposit Charge is required"),chargeType:r().required("Deposit Charge Type is required"),status:r().required("Status is required"),details:Y().of(S().shape({label:r().required("Label is required"),value:r().required("Value is required")}))}),M=Z({defaultValues:j,resolver:ne(R)}),{reset:B,setValue:x,handleSubmit:N,formState:{isSubmitting:Q}}=M;y.useEffect(()=>{ee(D)||B(D)},[D]),y.useEffect(()=>{G&&H()},[t]);const $=async b=>{try{await le(b),o.removeQueries([f.GetManualDepositGatewayList]),o.removeQueries([g]),i(T.paymentGateways.manualDeposit)}catch(V){console.log("ðŸš€ ~ file: CreateManualDeposit.jsx:50 ~ onSubmit ~ error",V)}},E=async()=>{try{await s({description:"Are you sure you want to delete this gateway?"}),m(!0),await oe(t),o.removeQueries([f.GetManualDepositGatewayList]),o.removeQueries([g]),i(T.paymentGateways.manualDeposit)}catch(b){console.log("ðŸš€ ~ file: CreateManualDeposit.jsx:79 ~ deleteGateway ~ error",b)}finally{m(!1)}};return a(ae,{title:"Create Manual Deposit",children:[e(de,{heading:"Create Manual Deposit",links:[{name:"Payment Gateways"},{name:"Manual Deposits"}]}),G&&L?e(ie,{}):e(te,{children:e(re,{methods:M,onSubmit:N($),children:a(p,{container:!0,spacing:4,children:[e(p,{item:!0,xs:12,md:5,children:a(v,{children:[e(w,{title:"Details"}),e(C,{}),e(q,{children:a(u,{spacing:4,children:[e(se,{setValue:x,name:"logo",accept:"image/*"}),e(l,{name:"name",label:"Gateway Name"}),e(l,{name:"processingTime",label:"Processing Time"}),e(l,{maskCurrency:!0,name:"minDeposit",label:"Minimum Deposit"}),e(l,{maskCurrency:!0,name:"maxDeposit",label:"Maximum Deposit"}),e(l,{maskNumber:!0,name:"charge",label:"Deposit Charge"}),a(P,{name:"chargeType",label:"Deposit Charge Type",children:[e(h,{value:"fixed",children:"Fixed"}),e(h,{value:"percentage",children:"Percentage"})]}),a(P,{name:"status",label:"Status",children:[e(h,{value:"active",children:"Active"}),e(h,{value:"inactive",children:"Inactive"})]})]})})]})}),e(p,{item:!0,xs:12,md:7,children:e(u,{spacing:3,children:e(ye,{setValue:x})})}),a(p,{display:"flex",item:!0,xs:12,children:[!!t&&e(I,{loading:c,onClick:E,startIcon:e(d,{icon:"mdi:trash"}),color:"error",variant:"contained",children:"Delete"}),e(I,{type:"submit",sx:{ml:"auto"},variant:"contained",size:"large",loading:Q,children:"Submit"})]})]})})})]})};export{qe as default};
