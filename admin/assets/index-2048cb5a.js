import{j as i,F,S as k,e,T as N,l as P,I as m,c3 as X,p as W,R as h,aP as $,w as Q,cn as z,t as I,s as A,c as K,a as C,c4 as x,d as H,o as V,D as J,z as M,h as U,g as _,i as Y,aD as u,m as Z,B,L as ee,co as te,bd as ne,f as D,cp as ie,P as re}from"./index-7ce534fb.js";import{r as w}from"./warn-once-223a138d.js";import{H as ae}from"./HeaderBreadcrumbs-7dcdcbac.js";import{u as S}from"./EmptyContent-22072c99.js";import{D as oe}from"./DataTableClient-3fc18a4d.js";import{L as O}from"./LoadingIconButton-9648fa41.js";import{u as se,m as le}from"./useFormRepeater-4850cb5d.js";import{d as ce,a as de}from"./CheckBoxOutlineBlank-2eb2fc00.js";import{A as ue}from"./TableCell-b673782b.js";import{c as E}from"./index-2e108c35.js";import"./Skeleton-7d8866f7.js";import"./formatTime-af0276ab.js";import"./index-1771e82c.js";import"./CardHeader-51eb309e.js";import"./HTMLProjectionNode-1401ff63.js";import"./jsx-runtime_commonjs-proxy-e24ef60d.js";import"./Close-40502a6a.js";const pe=({watch:a})=>{const{fields:r,resetFieldArray:o,onAddField:t,onRemoveField:s}=se({name:"dropdownOptions",append:{option:""}});return i(F,{children:[i(k,{direction:"row",justifyContent:"space-between",alignItems:"center",children:[e(N,{children:"Options"}),e(P,{onClick:()=>t(),color:"success",variant:"contained",children:e(m,{icon:"material-symbols:add"})})]}),r.map((c,d)=>i(X,{children:[e(me,{onRemoveField:s,index:d}),";"]},d))]})};function me({onRemoveField:a,index:r}){return e(le.div,{initial:{y:-100,opacity:0},animate:{y:0,opacity:1},exit:{y:-100,opacity:0},transition:{duration:.4},children:i(W,{sx:{display:"flex",alignItems:"center",gap:2},children:[e(h,{name:`dropdownOptions.${r}.option`,label:"Add Label",variant:"standard"}),e(P,{onClick:()=>a(r),color:"error",variant:"contained",children:e(m,{icon:"ri:close-fill"})})]},r)})}const he=e(ce,{fontSize:"small"}),fe=e(de,{fontSize:"small"});function ye({name:a,fileExtensions:r,setFileExtensions:o}){return e(ue,{value:r,multiple:!0,options:ge,disableCloseOnSelect:!0,getOptionLabel:t=>t,renderOption:(t,s,{selected:c})=>i("li",{...t,children:[e($,{icon:he,checkedIcon:fe,style:{marginRight:8},checked:c}),s]}),onChange:(t,s)=>o(s),style:{width:500},renderInput:t=>e(h,{name:a,...t,label:"File Extensions",variant:"standard"})})}const ge=["JPG","JPEG","PNG","WEBP","PDF","DOC","DOCX","TXT","XLX","XLSX","CSV"],be=({editId:a=null,open:r,onClose:o})=>{const{data:{data:t=[]}={},isLoading:s}=Q([I.GetKycSettingList],z),c=A(),d={labelId:0,label:"",required:"",inputType:"",fileExtensions:[],dropdownOptions:[{option:""}]},f=K().shape({label:C().required("Label is required"),required:C().required("Required is required"),inputType:C().required("Input Type is required"),fileExtensions:x().when("inputType",l=>{if(l==="file")return x().min(1,"File Extensions is required")}),dropdownOptions:x().when("inputType",l=>{if(l==="dropdown")return x().of(K().shape({option:C().required("Option is required")})).min(1,"One Option is required")})}),p=H({defaultValues:d,resolver:V(f)}),{handleSubmit:v,reset:y,watch:g,setValue:L,control:T,formState:{isSubmitting:q}}=p,n=async l=>{try{await te(l),y(),o(),c.removeQueries([I.GetKycSettingList])}catch(j){console.log("ðŸš€ ~ file: CreateLabelDialog.jsx:55 ~ onSubmit ~ error",j)}},b=g("inputType"),R=g("fileExtensions"),G=l=>L("fileExtensions",l);return w.useEffect(()=>{t.length&&y(t.find(l=>l.labelId===a))},[t]),i(J,{open:r,onClose:o,children:[s&&e(M,{}),i(U,{methods:p,onSubmit:v(n),children:[e(_,{gutterBottom:!0,children:a?"Update Kyc Form Label":"Create New Kyc Form Label"}),e(Y,{children:i(k,{spacing:2,children:[e(h,{name:"label",label:"Label",variant:"standard"}),i(h,{select:!0,name:"required",label:"Is Required",variant:"standard",children:[e(u,{value:"optional",children:"Optional"}),e(u,{value:"required",children:"Required"})]}),i(h,{select:!0,name:"inputType",label:"Input Type",variant:"standard",children:[e(u,{value:"input",children:"Input"}),e(u,{value:"textarea",children:"TextArea"}),e(u,{value:"dropdown",children:"Dropdown"}),e(u,{value:"file",children:"File"}),e(u,{value:"date",children:"Date"})]}),b==="file"&&e(ye,{fileExtensions:R,setFileExtensions:G,name:"fileExtensions"}),b==="dropdown"&&e(pe,{})]})}),i(Z,{children:[e(B,{sx:{textTransform:"uppercase"},onClick:o,children:"Cancel"}),e(ee,{loading:q,type:"submit",sx:{textTransform:"uppercase"},children:a?"Update":"Create"})]})]})]})},Ce=()=>{const a=ne(),r=A(),[o,t]=w.useState(!1),[s,c]=w.useState(null),[d,f]=w.useState(null),p=I.GetKycSettingList,v=()=>{t(!1),c(null)},y=()=>t(!0),g=n=>{c(n),t(!0)},L=async n=>{try{await a({description:"Are you sure you want to delete?"}),f(n),await ie(n),r.removeQueries([p])}catch(b){console.log("ðŸš€ ~ file: KycSettingList.jsx:33 ~ handleDelete ~ error",b)}finally{f(null)}},T=[{field:"createdAt",sort:"desc"}],q=[{field:"label",headerName:S("label"),minWidth:100,flex:1},{field:"inputType",headerName:S("type"),minWidth:100,flex:1,renderCell:({value:n})=>E(n)},{field:"required",headerName:S("is required"),minWidth:100,flex:1,renderCell:({value:n})=>E(n)},{field:"action",headerName:S("action"),minWidth:50,sortable:!1,renderCell({row:{labelId:n}}){return i(F,{children:[e(O,{loading:d===n,onClick:()=>g(n),children:e(m,{icon:D.pencil})}),e(O,{loading:d===n,onClick:()=>L(n),children:e(m,{icon:D.delete})})]})}}];return i(F,{children:[o&&e(be,{editId:s,open:o,onClose:v}),e(oe,{title:"Kyc Form Details",queryKey:p,sortModel:T,columns:q,action:e(B,{onClick:y,startIcon:e(m,{icon:D.add}),variant:"contained",children:"Create a new"}),getRowId:"labelId"})]})},xe=()=>i(re,{title:"Kyc Setting",children:[e(ae,{heading:"Kyc Setting",links:[{name:"System Configuration"},{name:"Kyc Setting"}]}),e(Ce,{})]}),Ge=xe;export{Ge as default};
