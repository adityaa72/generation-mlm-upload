import{Z as L,$ as M,E as q,aI as oe,_ as x,a0 as N,a1 as G,aX as te,j as i,e as t,a2 as w,a3 as B,cJ as se,X as ne,c as j,a as F,d as O,o as H,D as ae,h as Q,g as re,i as ie,S as C,R as $,m as ce,B as I,L as _,cK as de,bd as le,s as ue,l as z,I as D,f as U,cL as pe,t as T,w as K,p as V,z as me,T as W,cM as fe,C as ge,bc as be,cN as he,cO as xe,P as ye}from"./index-7ce534fb.js";import{r as f}from"./warn-once-223a138d.js";import{H as Ce}from"./HeaderBreadcrumbs-7dcdcbac.js";import{L as Se}from"./LoadingIconButton-9648fa41.js";import{u as Ae}from"./useFormEdit-003d10dc.js";import{C as ve}from"./CardHeader-51eb309e.js";import{C as qe}from"./CardContent-d5c47145.js";const Re=f.createContext({}),X=Re;function we(e){return M("MuiAccordion",e)}const Fe=L("MuiAccordion",["root","rounded","expanded","disabled","gutters","region"]),R=Fe,$e=["children","className","defaultExpanded","disabled","disableGutters","expanded","onChange","square","TransitionComponent","TransitionProps"],De=e=>{const{classes:o,square:s,expanded:n,disabled:a,disableGutters:c}=e;return B({root:["root",!s&&"rounded",n&&"expanded",a&&"disabled",!c&&"gutters"],region:["region"]},we,o)},ke=q(oe,{name:"MuiAccordion",slot:"Root",overridesResolver:(e,o)=>{const{ownerState:s}=e;return[{[`& .${R.region}`]:o.region},o.root,!s.square&&o.rounded,!s.disableGutters&&o.gutters]}})(({theme:e})=>{const o={duration:e.transitions.duration.shortest};return{position:"relative",transition:e.transitions.create(["margin"],o),overflowAnchor:"none","&:before":{position:"absolute",left:0,top:-1,right:0,height:1,content:'""',opacity:1,backgroundColor:(e.vars||e).palette.divider,transition:e.transitions.create(["opacity","background-color"],o)},"&:first-of-type":{"&:before":{display:"none"}},[`&.${R.expanded}`]:{"&:before":{opacity:0},"&:first-of-type":{marginTop:0},"&:last-of-type":{marginBottom:0},"& + &":{"&:before":{display:"none"}}},[`&.${R.disabled}`]:{backgroundColor:(e.vars||e).palette.action.disabledBackground}}},({theme:e,ownerState:o})=>x({},!o.square&&{borderRadius:0,"&:first-of-type":{borderTopLeftRadius:(e.vars||e).shape.borderRadius,borderTopRightRadius:(e.vars||e).shape.borderRadius},"&:last-of-type":{borderBottomLeftRadius:(e.vars||e).shape.borderRadius,borderBottomRightRadius:(e.vars||e).shape.borderRadius,"@supports (-ms-ime-align: auto)":{borderBottomLeftRadius:0,borderBottomRightRadius:0}}},!o.disableGutters&&{[`&.${R.expanded}`]:{margin:"16px 0"}})),Le=f.forwardRef(function(o,s){const n=N({props:o,name:"MuiAccordion"}),{children:a,className:c,defaultExpanded:d=!1,disabled:l=!1,disableGutters:r=!1,expanded:g,onChange:u,square:m=!1,TransitionComponent:b=se,TransitionProps:h}=n,A=G(n,$e),[p,y]=te({controlled:g,default:d,name:"Accordion",state:"expanded"}),v=f.useCallback(ee=>{y(!p),u&&u(ee,!p)},[p,u,y]),[k,...Z]=f.Children.toArray(a),Y=f.useMemo(()=>({expanded:p,disabled:l,disableGutters:r,toggle:v}),[p,l,r,v]),E=x({},n,{square:m,disabled:l,disableGutters:r,expanded:p}),P=De(E);return i(ke,x({className:w(P.root,c),ref:s,ownerState:E,square:m},A,{children:[t(X.Provider,{value:Y,children:k}),t(b,x({in:p,timeout:"auto"},h,{children:t("div",{"aria-labelledby":k.props.id,id:k.props["aria-controls"],role:"region",className:P.region,children:Z})}))]}))}),Me=Le;function Ne(e){return M("MuiAccordionDetails",e)}L("MuiAccordionDetails",["root"]);const Ge=["className"],Be=e=>{const{classes:o}=e;return B({root:["root"]},Ne,o)},Ie=q("div",{name:"MuiAccordionDetails",slot:"Root",overridesResolver:(e,o)=>o.root})(({theme:e})=>({padding:e.spacing(1,2,2)})),Te=f.forwardRef(function(o,s){const n=N({props:o,name:"MuiAccordionDetails"}),{className:a}=n,c=G(n,Ge),d=n,l=Be(d);return t(Ie,x({className:w(l.root,a),ref:s,ownerState:d},c))}),Ee=Te;function Pe(e){return M("MuiAccordionSummary",e)}const Ue=L("MuiAccordionSummary",["root","expanded","focusVisible","disabled","gutters","contentGutters","content","expandIconWrapper"]),S=Ue,Ve=["children","className","expandIcon","focusVisibleClassName","onClick"],We=e=>{const{classes:o,expanded:s,disabled:n,disableGutters:a}=e;return B({root:["root",s&&"expanded",n&&"disabled",!a&&"gutters"],focusVisible:["focusVisible"],content:["content",s&&"expanded",!a&&"contentGutters"],expandIconWrapper:["expandIconWrapper",s&&"expanded"]},Pe,o)},je=q(ne,{name:"MuiAccordionSummary",slot:"Root",overridesResolver:(e,o)=>o.root})(({theme:e,ownerState:o})=>{const s={duration:e.transitions.duration.shortest};return x({display:"flex",minHeight:48,padding:e.spacing(0,2),transition:e.transitions.create(["min-height","background-color"],s),[`&.${S.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${S.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},[`&:hover:not(.${S.disabled})`]:{cursor:"pointer"}},!o.disableGutters&&{[`&.${S.expanded}`]:{minHeight:64}})}),Oe=q("div",{name:"MuiAccordionSummary",slot:"Content",overridesResolver:(e,o)=>o.content})(({theme:e,ownerState:o})=>x({display:"flex",flexGrow:1,margin:"12px 0"},!o.disableGutters&&{transition:e.transitions.create(["margin"],{duration:e.transitions.duration.shortest}),[`&.${S.expanded}`]:{margin:"20px 0"}})),He=q("div",{name:"MuiAccordionSummary",slot:"ExpandIconWrapper",overridesResolver:(e,o)=>o.expandIconWrapper})(({theme:e})=>({display:"flex",color:(e.vars||e).palette.action.active,transform:"rotate(0deg)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest}),[`&.${S.expanded}`]:{transform:"rotate(180deg)"}})),Qe=f.forwardRef(function(o,s){const n=N({props:o,name:"MuiAccordionSummary"}),{children:a,className:c,expandIcon:d,focusVisibleClassName:l,onClick:r}=n,g=G(n,Ve),{disabled:u=!1,disableGutters:m,expanded:b,toggle:h}=f.useContext(X),A=v=>{h&&h(v),r&&r(v)},p=x({},n,{expanded:b,disabled:u,disableGutters:m}),y=We(p);return i(je,x({focusRipple:!1,disableRipple:!0,disabled:u,component:"div","aria-expanded":b,className:w(y.root,c),focusVisibleClassName:w(y.focusVisible,l),onClick:A,ref:s,ownerState:p},g,{children:[t(Oe,{className:y.content,ownerState:p,children:a}),d&&t(He,{className:y.expandIconWrapper,ownerState:p,children:d})]}))}),_e=Qe,J=({question:e="",answer:o="",faqId:s=0,open:n,handleClose:a,refetch:c})=>{const d={faqId:s,question:e,answer:o},l=!!s,r=j().shape({question:F().required("Question is required"),answer:F().required("Answer is required")}),g=O({defaultValues:d,resolver:H(r)}),{reset:u,handleSubmit:m,formState:{isSubmitting:b}}=g;return t(ae,{open:n,onClose:a,children:i(Q,{methods:g,onSubmit:m(async A=>{try{await de(A),u(),a(),c()}catch(p){console.log("ðŸš€ ~ file: FaqCreateDialog.jsx:34 ~ onSubmit ~ error",p)}}),children:[t(re,{children:l?"Update Faq":"Create New Faq"}),t(ie,{sx:{minWidth:{md:500}},children:i(C,{spacing:4,py:2,children:[t($,{fullWidth:!0,name:"question",label:"Question"}),t($,{fullWidth:!0,multiline:!0,minRows:4,name:"answer",label:"Answer"})]})}),i(ce,{children:[t(I,{onClick:a,children:"CANCEL"}),t(_,{type:"submit",loading:b,children:"SUBMIT"})]})]})})},ze=({question:e,answer:o,faqId:s,refetch:n})=>{const[a,c]=f.useState(!1),d=le(),[l,r]=f.useState(!1),g=ue(),u=async()=>{try{await d({description:"Are you sure you want to delete this question?"}),r(!0),await pe(s),g.invalidateQueries([T.GetFaqList])}catch(h){console.log("ðŸš€ ~ file: FaqAction.jsx:18 ~ handleDelete ~ error",h)}finally{r(!1)}},m=()=>c(!1);return i(C,{direction:"row",alignItems:"center",children:[t(z,{onClick:()=>c(!0),children:t(D,{icon:U.pencil})}),t(Se,{loading:l,onClick:u,children:t(D,{icon:U.delete})}),t(J,{question:e,answer:o,faqId:s,open:a,handleClose:m,refetch:n})]})},Ke=()=>{const e=T.GetFaqList,{isLoading:o,isRefetching:s,refetch:n,data:a}=K([e],fe,{keepPreviousData:!0}),c=(a==null?void 0:a.data)??[],[d,l]=f.useState(!1),r=()=>l(!0),g=()=>l(!1);return i(V,{children:[(o||s)&&t(me,{}),i(C,{spacing:4,alignItems:"flex-end",children:[i(I,{onClick:r,color:"primary",children:[t(D,{sx:{fontSize:24,marginLeft:"auto"},icon:"carbon:add"})," Create New"]}),t(V,{sx:{width:1},children:c.map(({question:u,answer:m,faqId:b},h)=>i(Me,{sx:{width:1},children:[i(C,{justifyContent:"space-between",direction:"row",children:[t(_e,{sx:{flexGrow:1},children:i(W,{children:["Q",h+1,": ",u]})}),t(ze,{refetch:n,question:u,answer:m,faqId:b})]}),t(Ee,{children:i(W,{children:[m," "]})})]},b))}),t(J,{open:d,handleClose:g,refetch:n})]})]})},Xe=Ke,Je=()=>{const e=f.useMemo(()=>({}),[]),{data:{data:o=e}={}}=K([T.GetFaqSection],xe),s={title:"",subtitle:""},n=j().shape({title:F().required("Title is required"),subtitle:F()}),a=O({resolver:H(n),defaultValues:s,mode:"all"}),{reset:c,handleSubmit:d,formState:{isSubmitting:l}}=a,{isEditing:r,startEditing:g,stopEditing:u}=Ae(),m=async b=>{try{await he(b),u()}catch{}};return f.useEffect(()=>{c(o)},[o]),i(ge,{children:[t(ve,{title:"Faq Section",action:r?void 0:t(z,{onClick:g,children:t(D,{icon:"mdi:lead-pencil"})})}),t(be,{}),t(qe,{children:t(Q,{methods:a,onSubmit:d(m),children:i(C,{spacing:3,children:[t($,{disabled:!r,name:"title",type:"text",label:"Title"}),t($,{disabled:!r,multiline:!0,minRows:4,name:"subtitle",type:"text",label:"Subtitle"}),r&&i(C,{direction:"row",justifyContent:"flex-end",spacing:2,children:[t(I,{size:"large",onClick:u,children:"Cancel"}),t(_,{size:"large",type:"submit",variant:"contained",loading:l,children:"Save Changes"})]})]})})})]})},Ze=Je;function ro(){return i(ye,{title:"Faq Section",children:[t(Ce,{heading:"Faq Section",links:[{name:"Manage Section"},{name:"Faq Section"}]}),i(C,{spacing:4,children:[t(Ze,{}),t(Xe,{})]})]})}export{ro as default};
