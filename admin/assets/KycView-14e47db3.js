import{j as t,C as x,p as o,e,bc as w,S,T as a,x as z,F as j,J as n,aQ as m,bp as M,E as F,am as E,aV as H,ao as O,bn as J,w as Z,t as p,z as _,D as $,g as X,L as D,I as T,f as W,bd as Y,u as G,s as Q,c as ee,a as te,d as re,h as ie,i as ae,R as ne,m as se,B as le,bq as ce,A as N,o as oe,br as de,bs as ue}from"./index-7ce534fb.js";import{r as q}from"./warn-once-223a138d.js";import{f as y,p as he}from"./formatTime-af0276ab.js";import{L as f}from"./Label-c270b6e0.js";import{C as P}from"./CardHeader-51eb309e.js";import{C as I}from"./CardContent-d5c47145.js";import{c as k}from"./index-2e108c35.js";import{F as me}from"./FormLabel-b1fd6c0d.js";import{A as v,a as K}from"./AlertTitle-829aeda4.js";import"./Close-40502a6a.js";const pe=({userId:r,userName:l,email:i,registeredAt:s,referralId:d,plan:c,status:h,kyc:u})=>t(x,{children:[t(o,{sx:{bgcolor:"background.neutral"},children:[e(P,{title:"About"}),e(w,{})]}),e(I,{children:t(S,{spacing:2,children:[t(o,{children:[e(a,{variant:"subtitle2",children:"User ID"}),e(a,{variant:"body2",color:"text.secondary",children:r})]}),t(o,{children:[e(a,{variant:"subtitle2",children:"Username"}),e(a,{variant:"body2",color:"text.secondary",children:l})]}),t(o,{children:[e(a,{variant:"subtitle2",children:"Email"}),e(a,{variant:"body2",color:"text.secondary",children:i})]}),t(o,{children:[e(a,{variant:"subtitle2",children:"Member Since"}),e(a,{variant:"body2",color:"text.secondary",children:y(s)})]}),t(o,{children:[e(a,{variant:"subtitle2",children:"Referral Id"}),e(a,{variant:"body2",color:"error.main",children:d})]}),z(c)?t(o,{children:[e(a,{variant:"subtitle2",children:"Active Plan"}),e(f,{color:"primary",children:"NA"})]}):t(j,{children:[t(o,{children:[e(a,{variant:"subtitle2",children:"Active Plan"}),e(f,{color:"primary",children:c.planName})]}),t(o,{children:[e(a,{variant:"subtitle2",children:"Activated At"}),e(a,{variant:"body2",color:"text.secondary",children:y(c.createdAt)})]}),t(o,{children:[e(a,{variant:"subtitle2",children:"Valid Till"}),e(a,{variant:"body2",color:"text.secondary",children:y(c.validTill)})]})]}),t(o,{children:[e(a,{variant:"subtitle2",children:"Status"}),e(f,{color:h==="active"?"success":"error",children:k(h)})]}),t(o,{children:[e(a,{variant:"subtitle2",children:"Kyc"}),e(f,{color:u==="approved"&&"success"||u==="pending"&&"warning"||u==="rejected"&&"error"||"info",children:k(u)})]})]})})]}),ye=({address:r,country:l,state:i,city:s,pinCode:d,mobileNumber:c})=>t(x,{children:[t(o,{sx:{bgcolor:"background.neutral"},children:[e(P,{title:"Contact Details"}),e(w,{})]}),e(I,{children:t(n,{container:!0,spacing:3,children:[e(n,{item:!0,xs:12,md:6,children:e(m,{disabled:!0,fullWidth:!0,value:r,type:"text",label:"Address"})}),e(n,{item:!0,xs:12,md:6,children:e(m,{disabled:!0,fullWidth:!0,value:l,type:"text",label:"Country"})}),e(n,{item:!0,xs:12,md:6,children:e(m,{disabled:!0,fullWidth:!0,value:i,type:"text",label:"State/Region"})}),e(n,{item:!0,xs:12,md:6,children:e(m,{disabled:!0,fullWidth:!0,value:s,type:"text",label:"City"})}),e(n,{item:!0,xs:12,md:6,children:e(m,{disabled:!0,fullWidth:!0,value:d,type:"text",label:"Pin Code/Zip Code"})}),e(n,{item:!0,xs:12,md:6,children:e(m,{disabled:!0,fullWidth:!0,value:c,label:"Mobile Number"})})]})})]}),be=({kycData:r,firstName:l,lastName:i})=>{const{user:s,form:d}=r;return t(x,{children:[t(o,{sx:{bgcolor:"background.neutral"},children:[e(P,{title:"Profile"}),e(w,{})]}),e(I,{children:t(n,{container:!0,spacing:2,children:[e(n,{item:!0,xs:12,md:6,children:e(m,{fullWidth:!0,disabled:!0,value:l,type:"text",label:"First Name"})}),e(n,{item:!0,xs:12,md:6,children:e(m,{fullWidth:!0,disabled:!0,value:i,type:"text",label:"Last Name"})}),d.map(c=>{const{labelId:h,label:u,inputType:g}=c,b=s[h];return e(n,{item:!0,xs:12,md:6,children:e(ge,{label:u,value:b,inputType:g})},h)})]})})]})};function ge({label:r,inputType:l,value:i}){switch(l==="date"&&i&&(i=he(i)),l){case"input":case"date":case"dropdown":return e(m,{fullWidth:!0,disabled:!0,value:i,label:r});case"textarea":return e(m,{fullWidth:!0,disabled:!0,multiline:!0,minRows:4,value:i,label:r});case"file":return t(o,{children:[e(me,{label:r}),e(M,{disabled:!0,file:i})]})}}const fe=F("div")(({theme:r})=>({"&:before":{...E().bgBlur({blur:2,color:r.palette.primary.darker}),top:0,zIndex:9,content:"''",width:"100%",height:"100%",position:"absolute"}})),ve=F("div")(({theme:r})=>({left:0,right:0,zIndex:99,position:"absolute",marginTop:r.spacing(5),[r.breakpoints.up("md")]:{right:"auto",display:"flex",alignItems:"center",left:r.spacing(3),bottom:r.spacing(3)}})),xe=({displayName:r,userId:l,avatar:i,cover:s})=>t(fe,{children:[t(ve,{children:[e(H,{sx:{width:200,height:200},src:i}),t(o,{sx:{ml:{md:3},mt:{xs:1,md:0},color:"common.white",textAlign:{xs:"center",md:"left"}},children:[e(a,{variant:"h4",children:r}),e(a,{sx:{opacity:.72},children:l})]})]}),e(O,{alt:"profile cover",src:s,sx:{position:"absolute",top:0,left:0,right:0,bottom:0}})]}),Fe=()=>{const r=J(),[l,i]=q.useState(!1),{id:s}=r,{data:{data:{user:d={},kyc:c={}}={}}={},isLoading:h}=Z([p.GetKycData,s],()=>ue(s)),{kycData:u,firstName:g,lastName:b,contact:A,userId:U}=d,{createdAt:V,updatedAt:R,rejectedReason:B,status:C}=c,L=()=>{i(!1)};return h?e(_,{}):e(j,{children:t(n,{container:!0,spacing:2,children:[C==="pending"&&t(j,{children:[t($,{onClose:L,open:l,children:[e(X,{children:"Reject Kyc Verification"}),e(Ce,{kycId:s,onClose:L})]}),e(n,{item:!0,xs:12,children:t(S,{justifyContent:"flex-end",direction:"row",spacing:3,children:[e(D,{variant:"contained",color:"error",size:"large",startIcon:e(T,{icon:W.close}),onClick:()=>i(!0),children:"Reject"}),e(Ae,{kycId:s})]})}),e(n,{item:!0,xs:12,children:t(v,{severity:"warning",children:[e(K,{children:"Pending"}),U," requested for kyc verification on ",y(V)]})})]}),C==="approved"&&e(n,{item:!0,xs:12,children:t(v,{severity:"success",children:[e(K,{children:"Approved"}),"Kyc approved on ",y(R)]})}),C==="rejected"&&e(n,{item:!0,xs:12,children:t(S,{spacing:1,children:[t(v,{severity:"error",children:[e(K,{children:"Rejected"}),"Kyc rejected on ",y(R)]}),e(v,{severity:"info",children:B})]})}),e(n,{item:!0,xs:12,children:e(x,{sx:{height:280},children:e(xe,{...d})})}),e(n,{item:!0,xs:12,md:4,children:e(pe,{...d})}),e(n,{item:!0,xs:12,md:8,children:e(be,{kycData:u,firstName:g,lastName:b})}),e(n,{item:!0,xs:12,md:12,children:e(ye,{...A})})]})})};function Ae({kycId:r}){const l=Y(),i=G(),s=Q(),[d,c]=q.useState(!1),h=async()=>{try{await l({description:"Are you sure want to approve?"}),c(!0),await ce(r),s.removeQueries([p.GetKycData,r]),s.removeQueries([p.GetPendingKycList]),s.removeQueries([p.GetApprovedKycList]),i(N.kyc.pending)}catch(u){console.log("ðŸš€ ~ file: KycView.jsx:32 ~ handleApprove ~ error",u)}finally{c(!1)}};return e(D,{loading:d,variant:"contained",color:"success",size:"large",startIcon:e(T,{icon:W.check}),onClick:h,children:"Approve"})}function Ce({onClose:r,kycId:l}){const i=G(),s=ee().shape({message:te().required("Message is required")}),d=Q(),c=re({defaultValues:{message:""},resolver:oe(s)}),{handleSubmit:h,formState:{isSubmitting:u}}=c;return t(ie,{methods:c,onSubmit:h(async b=>{try{await de(l,b),d.removeQueries([p.GetKycData,l]),d.removeQueries([p.GetPendingKycList]),d.removeQueries([p.GetRejectedKycList]),i(N.kyc.pending)}catch(A){console.log("ðŸš€ ~ file: KycView.jsx:152 ~ onSubmit ~ error",A)}}),children:[e(ae,{children:e(ne,{multiline:!0,minRows:4,name:"message",label:"Message"})}),t(se,{children:[e(le,{onClick:r,children:"Disagree"}),e(D,{type:"submit",loading:u,children:"Reject"})]})]})}export{Fe as default};
