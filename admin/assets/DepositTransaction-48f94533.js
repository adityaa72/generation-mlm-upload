import{bn as te,t as m,w as ie,e,z as re,j as t,P as se,A as R,J as A,Q as I,bB as l,F as ae,S as u,C as T,T as b,bc as U,aQ as j,p as z,bp as M,D as k,g as W,L as P,I as L,f as N,u as $,d as E,s as V,h as J,i as K,R as _,m as X,B as Y,c as ne,a as oe,o as le,bH as ce,bI as de,bJ as pe}from"./index-7ce534fb.js";import{r as O}from"./warn-once-223a138d.js";import{C as ue}from"./CurrencyTextField-e9405b16.js";import{F as Z}from"./FormLabel-b1fd6c0d.js";import{H as me}from"./HeaderBreadcrumbs-7dcdcbac.js";import{f,q as he}from"./formatTime-af0276ab.js";import{A as p,a as v}from"./AlertTitle-829aeda4.js";import{C as F}from"./CardHeader-51eb309e.js";import{C as G}from"./CardContent-d5c47145.js";import"./Close-40502a6a.js";const ye=({onClose:c,transactionId:r})=>{const s=$(),n=E({defaultValues:{message:""}}),i=V(),{handleSubmit:h,formState:{isSubmitting:D}}=n;return t(J,{methods:n,onSubmit:h(async y=>{try{await ce(r,y),i.removeQueries([m.GetPendingDepositHistory]),i.removeQueries([m.GetAllDepositHistory]),i.removeQueries([m.GetApprovedDepositHistory]),i.removeQueries([m.GetDepositDetails,r]),s(R.deposit.pending)}catch(d){console.log("ðŸš€ ~ file: WithdrawTransaction.jsx:74 ~ approveWithdraw ~ error",d)}}),children:[e(K,{children:e(_,{multiline:!0,minRows:4,name:"message",label:"Message (optional)"})}),t(X,{children:[e(Y,{onClick:c,children:"Cancel"}),e(P,{type:"submit",loading:D,children:"Approve"})]})]})},ge=({onClose:c,transactionId:r})=>{const s=$(),n=ne().shape({message:oe().required("Message is required")}),i=V(),h=E({defaultValues:{message:""},resolver:le(n)}),{handleSubmit:D,formState:{isSubmitting:o}}=h;return t(J,{methods:h,onSubmit:D(async d=>{try{await de(r,d),i.removeQueries([m.GetPendingDepositHistory]),i.removeQueries([m.GetAllDepositHistory]),i.removeQueries([m.GetRejectedDepositHistory]),i.removeQueries([m.GetDepositDetails,r]),s(R.deposit.pending)}catch(a){console.log("ðŸš€ ~ file: WithdrawTransaction.jsx:74 ~ approveWithdraw ~ error",a)}}),children:[e(K,{children:e(_,{multiline:!0,minRows:4,name:"message",label:"Message"})}),t(X,{children:[e(Y,{onClick:c,children:"Cancel"}),e(P,{type:"submit",loading:o,children:"Reject"})]})]})},He=({breadcrumb:c=!0})=>{const r=te(),{id:s}=r,n=m.GetDepositDetails,{data:{data:i=[]}={},isLoading:h}=ie([n,s],()=>pe(s)),{id:D,userId:o,amount:y,charge:d,netAmount:a,currency:H,gatewayName:w,gatewayId:S,createdAt:x,updatedAt:C,message:Q,status:g,type:q,actionBy:ee,razorpayId:ve,paypalId:De,stripeId:Ce,mtnId:Ae,details:B}=i;return h?e(re,{}):t(se,{title:`Deposit Details #${s}`,children:[c&&e(me,{heading:"Deposit Details",links:[{name:"Deposits",href:R.deposit.all},{name:`Deposit #${s}`}]}),t(A,{container:!0,spacing:I,children:[t(A,{item:!0,xs:12,children:[ee==="admin"?t(p,{children:[e(v,{children:"Deposit By Admin"}),l(y)," has been deposit on ",f(C)]}):t(ae,{children:[g==="pending"&&t(p,{severity:"warning",children:[e(v,{children:"Deposit Pending"}),o," has requested to deposit ",l(a)," on ",f(x)]}),g==="review"&&t(p,{severity:"warning",children:[e(v,{children:"Deposit In Review"}),o," has requested to deposit ",l(a)," on ",f(x)]}),g==="approved"&&t(p,{severity:"success",children:[e(v,{children:"Deposit Approved"}),o," - deposit of ",l(a)," has been approved at"," ",f(C)]}),g==="credit"&&t(p,{severity:"success",children:[e(v,{children:"Deposit Credit"}),o," - deposit of ",l(a)," has been successful at"," ",f(C)]}),g==="rejected"&&t(p,{severity:"error",children:[e(v,{children:"Deposit Rejected"}),o," - deposit of ",l(a)," has been rejected at"," ",f(C)]}),g==="cancelled"&&t(p,{severity:"info",children:[e(v,{children:"Deposit Cancelled"}),o," has requested to deposit ",l(a)," on ",f(x)]}),g==="failed"&&t(p,{severity:"error",children:[e(v,{children:"Deposit Failed"}),o," - deposit of ",l(a)," has been failed at"," ",f(C)]})]}),!!Q&&e(p,{sx:{mt:I},severity:"info",children:Q})]}),e(A,{item:!0,xs:12,md:6,children:t(u,{spacing:I,children:[q==="manual"&&e(be,{details:B}),t(T,{children:[e(F,{title:"Summary"}),e(G,{sx:{pt:0},children:t(u,{spacing:3,children:[t(u,{direction:"row",justifyContent:"space-between",children:[e(b,{color:"text.secondary",children:"Payment Method"}),e(b,{variant:"subtitle1",children:w})]}),t(u,{direction:"row",justifyContent:"space-between",children:[e(b,{color:"text.secondary",children:"Amount"}),e(b,{variant:"subtitle1",children:l(a)})]}),t(u,{direction:"row",justifyContent:"space-between",children:[e(b,{color:"text.secondary",children:"Charge"}),e(b,{variant:"subtitle1",children:l(d)})]}),t(u,{direction:"row",justifyContent:"space-between",children:[e(b,{color:"text.secondary",children:"Payable Amount"}),e(b,{variant:"subtitle1",children:l(y)})]})]})})]})]})}),q==="manual"&&e(A,{item:!0,xs:12,md:6,children:e(fe,{status:g,charge:d,netAmount:y,details:B,transactionId:s})})]})]})};function be({details:{adminDetails:c}}){return t(T,{children:[e(F,{title:"Payee Details"}),e(U,{}),e(G,{children:e(u,{spacing:3,children:c.map(({label:r,type:s,value:n},i)=>s==="input"?e(j,{label:r,disabled:!0,value:n},i):t(z,{children:[e(Z,{label:r}),e(M,{disabled:!0,file:n})]},i))})})]})}function fe({charge:c,netAmount:r,details:s,status:n,transactionId:i}){const{userDetails:{userTransactionId:h,paymentImage:D,transactionDate:o}={}}=s,[y,d]=O.useState(!1),a=()=>d(!1),[H,w]=O.useState(!1),S=()=>w(!1);return t(T,{children:[n==="review"&&t(A,{item:!0,xs:12,children:[t(k,{onClose:S,open:H,children:[e(W,{children:"Reject Deposit"}),e(ge,{transactionId:i,onClose:S})]}),t(k,{onClose:a,open:y,children:[e(W,{children:"Approve Deposit"}),e(ye,{transactionId:i,onClose:a})]})]}),e(F,{title:"User Payment Details"}),e(U,{}),e(G,{children:t(u,{spacing:3,children:[e(j,{label:"Amount",disabled:!0,value:`${Number(r)-Number(c)}`}),e(ue,{label:"Payable Amount",disabled:!0,value:r}),e(j,{label:"User Transaction Id",disabled:!0,value:h}),e(j,{label:"User Transaction Date",disabled:!0,value:he(o)}),t(z,{children:[e(Z,{label:"Payment Image"}),e(M,{disabled:!0,file:D})]}),n==="review"&&t(u,{justifyContent:"flex-end",direction:"row",spacing:3,children:[e(P,{fullWidth:!0,variant:"contained",color:"error",size:"large",startIcon:e(L,{icon:N.close}),onClick:()=>w(!0),children:"Reject"}),e(P,{fullWidth:!0,variant:"contained",color:"success",size:"large",startIcon:e(L,{icon:N.check}),onClick:()=>d(!0),children:"Approve"})]})]})})]})}export{He as default};
