import{b3 as ae,b4 as oe,ad as se,_ as K,b5 as W,b6 as R,b7 as le,b8 as ce,b9 as de,ba as ue,a1 as me,e,a2 as he,bb as pe,a3 as fe,$ as be,j as n,C as I,p as h,bc as N,S as Z,T as d,x as ge,F as M,Q as J,c as F,a as U,d as q,o as E,L as S,D as X,g as Y,h as G,i as ee,R as x,m as re,B as O,bd as ye,be as xe,bf as ve,bg as Se,bh as ke,bi as Ce,J as u,aQ as C,s as Pe,l as Ue,I as Ae,f as Be,bj as we,t as te,bk as De,bl as Fe,aD as Ie,bm as Le,E as ne,am as je,aV as Ve,ao as Re,bn as Te,w as Ne,P as Me,z as qe,bo as Ee}from"./index-7ce534fb.js";import{r as k}from"./warn-once-223a138d.js";import{H as Ge}from"./HeaderBreadcrumbs-7dcdcbac.js";import{L as D}from"./Label-c270b6e0.js";import{f as T}from"./formatTime-af0276ab.js";import{C as $}from"./CardHeader-51eb309e.js";import{C as z}from"./CardContent-d5c47145.js";import{c as Q}from"./index-2e108c35.js";import{F as Oe}from"./FormLabel-b1fd6c0d.js";import{u as $e}from"./useFormEdit-003d10dc.js";import{P as ze}from"./profile_cover-e16cf7fb.js";const _e=["component","direction","spacing","divider","children","className"],He=ae(),We=oe("div",{name:"MuiStack",slot:"Root",overridesResolver:(r,t)=>t.root});function Qe(r){return se({props:r,name:"MuiStack",defaultTheme:He})}function Ke(r,t){const i=k.Children.toArray(r).filter(Boolean);return i.reduce((o,s,a)=>(o.push(s),a<i.length-1&&o.push(k.cloneElement(t,{key:`separator-${a}`})),o),[])}const Ze=r=>({row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"})[r],Je=({ownerState:r,theme:t})=>{let i=K({display:"flex",flexDirection:"column"},W({theme:t},R({values:r.direction,breakpoints:t.breakpoints.values}),o=>({flexDirection:o})));if(r.spacing){const o=le(t),s=Object.keys(t.breakpoints.values).reduce((m,p)=>((typeof r.spacing=="object"&&r.spacing[p]!=null||typeof r.direction=="object"&&r.direction[p]!=null)&&(m[p]=!0),m),{}),a=R({values:r.direction,base:s}),l=R({values:r.spacing,base:s});typeof a=="object"&&Object.keys(a).forEach((m,p,f)=>{if(!a[m]){const P=p>0?a[f[p-1]]:"column";a[m]=P}}),i=ce(i,W({theme:t},l,(m,p)=>({"& > :not(style) + :not(style)":{margin:0,[`margin${Ze(p?a[p]:r.direction)}`]:pe(o,m)}})))}return i=de(t.breakpoints,i),i};function Xe(r={}){const{createStyledComponent:t=We,useThemeProps:i=Qe,componentName:o="MuiStack"}=r,s=()=>fe({root:["root"]},m=>be(o,m),{}),a=t(Je);return k.forwardRef(function(m,p){const f=i(m),g=ue(f),{component:P="div",direction:A="column",spacing:L=0,divider:B,children:w,className:j}=g,b=me(g,_e),y={direction:A,spacing:L},V=s();return e(a,K({as:P,ownerState:y,ref:p,className:he(V.root,j)},b,{children:B?Ke(w,B):w}))})}const Ye=Xe(),_=Ye,er=({userId:r,userName:t,email:i,registeredAt:o,referralId:s,plan:a,status:l,kyc:c})=>n(I,{children:[n(h,{sx:{bgcolor:"background.neutral"},children:[e($,{title:"About"}),e(N,{})]}),e(z,{children:n(Z,{spacing:2,children:[n(h,{children:[e(d,{variant:"subtitle2",children:"User ID"}),e(d,{variant:"body2",color:"text.secondary",children:r})]}),n(h,{children:[e(d,{variant:"subtitle2",children:"Username"}),e(d,{variant:"body2",color:"text.secondary",children:t})]}),n(h,{children:[e(d,{variant:"subtitle2",children:"Email"}),e(d,{variant:"body2",color:"text.secondary",children:i})]}),n(h,{children:[e(d,{variant:"subtitle2",children:"Member Since"}),e(d,{variant:"body2",color:"text.secondary",children:T(o)})]}),n(h,{children:[e(d,{variant:"subtitle2",children:"Referral Id"}),e(d,{variant:"body2",color:"error.main",children:s})]}),ge(a)?n(h,{children:[e(d,{variant:"subtitle2",children:"Active Plan"}),e(D,{color:"primary",children:"NA"})]}):n(M,{children:[n(h,{children:[e(d,{variant:"subtitle2",children:"Active Plan"}),n(D,{color:"primary",children:[a.planName," - ",a.type]})]}),n(h,{children:[e(d,{variant:"subtitle2",children:"Activated At"}),e(d,{variant:"body2",color:"text.secondary",children:T(a.createdAt)})]}),n(h,{children:[e(d,{variant:"subtitle2",children:"Valid Till"}),e(d,{variant:"body2",color:"text.secondary",children:T(a.validTill)})]})]}),n(h,{children:[e(d,{variant:"subtitle2",children:"Status"}),e(D,{color:l==="active"?"success":"error",children:Q(l)})]}),n(h,{children:[e(d,{variant:"subtitle2",children:"Kyc"}),e(D,{color:c==="approved"&&"success"||c==="pending"&&"warning"||c==="rejected"&&"error"||"info",children:Q(c)})]})]})})]}),rr=({userId:r,status:t,refetch:i})=>n(_,{direction:{xs:"column",md:"row"},spacing:J,children:[e(tr,{userId:r}),e(nr,{userId:r}),e(ir,{userId:r}),e(ar,{refetch:i,userId:r,status:t})]});function tr({userId:r}){const[t,i]=k.useState(!1),o=async()=>i(!t),s={amount:"",message:""},a=F().shape({amount:U().required("Amount is required"),message:U().required("Message is required")}),l=q({defaultValues:s,resolver:E(a)}),{formState:{isSubmitting:c},handleSubmit:m}=l;return n(M,{children:[e(S,{onClick:o,sx:{flexGrow:1},variant:"contained",color:"primary",size:"large",children:"Add Balance"}),n(X,{open:t,onClose:o,children:[e(Y,{children:"Add Balance"}),n(G,{methods:l,onSubmit:m(async f=>{try{await xe(r,f),o()}catch(g){console.log("ðŸš€ ~ file: UserActionButtons.jsx:76 ~ onSubmit ~ error",g)}}),children:[e(ee,{children:n(_,{spacing:3,children:[e(x,{maskCurrency:!0,name:"amount",placeholder:"Amount"}),e(x,{name:"message",placeholder:"Message",multiline:!0,minRows:4})]})}),n(re,{children:[e(O,{onClick:o,color:"primary",children:"Cancel"}),e(S,{type:"submit",loading:c,children:"Submit"})]})]})]})]})}function nr({userId:r}){const[t,i]=k.useState(!1),o=async()=>i(!t),s={amount:"",message:""},a=F().shape({amount:U().required("Amount is required"),message:U().required("Message is required")}),l=q({defaultValues:s,resolver:E(a)}),{formState:{isSubmitting:c},handleSubmit:m}=l;return n(M,{children:[e(S,{onClick:o,sx:{flexGrow:1},variant:"contained",color:"warning",size:"large",children:"Subtract Balance"}),n(X,{open:t,onClose:o,children:[e(Y,{children:"Subtract Balance"}),n(G,{methods:l,onSubmit:m(async f=>{try{await ve(r,f),o()}catch(g){console.log("ðŸš€ ~ file: UserActionButtons.jsx:76 ~ onSubmit ~ error",g)}}),children:[e(ee,{children:n(_,{spacing:3,children:[e(x,{maskCurrency:!0,name:"amount",placeholder:"Amount"}),e(x,{name:"message",placeholder:"Message",multiline:!0,minRows:4})]})}),n(re,{children:[e(O,{onClick:o,color:"primary",children:"Cancel"}),e(S,{type:"submit",loading:c,children:"Submit"})]})]})]})]})}function ir({userId:r}){const[t,i]=k.useState(!1);return e(S,{onClick:async()=>{try{i(!0);const{data:{accessToken:s}}=await Se(r);window.open(ke+"/token/"+(s==null?void 0:s.replaceAll(".","__")))}catch(s){console.log("ðŸš€ ~ file: UserActionButtons.jsx:164 ~ handleClick ~ error",s)}finally{i(!1)}},sx:{flexGrow:1},variant:"contained",color:"secondary",loading:t,size:"large",children:"Login As Client"})}function ar({userId:r,status:t,refetch:i}){const[o,s]=k.useState(!1),a=ye();return e(S,{onClick:async()=>{try{await a({description:t==="active"?"Are you sure you want to block this user":"Are you sure you want to unblock this userZ"}),s(!0),await Ce(r,{status:t}),i()}catch(c){console.log("ðŸš€ ~ file: UserActionLoadingButtons.jsx:12 ~ handleBlockUnblock ~ error",c)}finally{s(!1)}},sx:{flexGrow:1},variant:"contained",color:"error",size:"large",loading:o,children:t==="active"?"Block User":"Unblock User"})}const or=({address:r,country:t,state:i,city:o,pinCode:s,mobileNumber:a})=>n(I,{children:[n(h,{sx:{bgcolor:"background.neutral"},children:[e($,{title:"Contact Details"}),e(N,{})]}),e(z,{children:n(u,{container:!0,spacing:3,children:[e(u,{item:!0,xs:12,md:6,children:e(C,{disabled:!0,fullWidth:!0,value:r,type:"text",label:"Address"})}),e(u,{item:!0,xs:12,md:6,children:e(C,{disabled:!0,fullWidth:!0,value:t,type:"text",label:"Country"})}),e(u,{item:!0,xs:12,md:6,children:e(C,{disabled:!0,fullWidth:!0,value:i,type:"text",label:"State/Region"})}),e(u,{item:!0,xs:12,md:6,children:e(C,{disabled:!0,fullWidth:!0,value:o,type:"text",label:"City"})}),e(u,{item:!0,xs:12,md:6,children:e(C,{disabled:!0,fullWidth:!0,value:s,type:"text",label:"Pin Code/Zip Code"})}),e(u,{item:!0,xs:12,md:6,children:e(C,{disabled:!0,fullWidth:!0,value:a,label:"Mobile Number"})})]})})]});function sr({user:r}){const t=Pe(),{isEditing:i,startEditing:o,stopEditing:s}=$e(),{firstName:a,lastName:l,userId:c,kyc:m,kycData:{user:p,form:f}}=r,g=F().shape({kyc:F().shape({...f.reduce((b,{labelId:y,label:V,required:ie,inputType:H})=>{let v=U();return ie==="required"&&(v=v.required(`${V} is required`)),H==="textarea"&&(v=v.max(1e3,"Maximum 1000 characters are allowed")),H==="input"&&(v=v.max(30,"Maximum 30 characters are allowed")),{...b,[y]:v}},{})})}),P={firstName:a,lastName:l,kyc:{...f.reduce((b,{labelId:y})=>({...b,[y]:p[y]??""}),{})}},A=q({resolver:E(g),defaultValues:P}),{setValue:L,handleSubmit:B,formState:{isSubmitting:w}}=A,j=async b=>{try{await we(c,b),s(),t.removeQueries([te.GetUserProfile,c])}catch(y){console.error(y)}};return n(I,{children:[n(h,{sx:{bgcolor:"background.neutral"},children:[e($,{title:"My Profile",action:i?void 0:e(Ue,{onClick:o,children:e(Ae,{icon:Be.pencil})})}),e(N,{})]}),e(z,{children:e(G,{methods:A,onSubmit:B(j),children:n(u,{container:!0,spacing:2,children:[e(u,{item:!0,xs:12,md:6,children:e(x,{disabled:!0,name:"firstName",type:"text",label:"First Name"})}),e(u,{item:!0,xs:12,md:6,children:e(x,{disabled:!0,name:"lastName",type:"text",label:"Last Name"})}),f.map(b=>e(u,{item:!0,xs:12,md:6,children:e(lr,{disabled:!i,setValue:L,name:b.labelId,...b})},b.labelId)),e(u,{item:!0,marginLeft:"auto",children:i&&n(Z,{direction:"row",justifyContent:"flex-end",spacing:2,children:[e(O,{size:"large",onClick:s,children:"Cancel"}),e(S,{size:"large",type:"submit",variant:"contained",loading:w,children:"Save Changes"})]})})]})})})]})}function lr({setValue:r,label:t,inputType:i,fileExtensions:o,dropdownOptions:s,name:a,disabled:l}){switch(a=`kyc.${a}`,i){case"input":return e(x,{disabled:l,name:a,label:t});case"textarea":return e(x,{disabled:l,multiline:!0,minRows:4,name:a,label:t});case"date":return e(Le,{disabled:l,name:a,label:t});case"dropdown":return e(Fe,{disabled:l,name:a,label:t,children:s.map(({option:c})=>e(Ie,{value:c,children:c},c))});case"file":return n(h,{children:[e(Oe,{label:t}),e(De,{disabled:l,setValue:r,name:a})]})}}const cr=ne("div")(({theme:r})=>({"&:before":{...je().bgBlur({blur:2,color:r.palette.primary.darker}),top:0,zIndex:9,content:"''",width:"100%",height:"100%",position:"absolute"}})),dr=ne("div")(({theme:r})=>({left:0,right:0,zIndex:99,position:"absolute",marginTop:r.spacing(5),alignItems:"center",[r.breakpoints.up("md")]:{right:"auto",display:"flex",left:r.spacing(3),bottom:r.spacing(3)},[r.breakpoints.down("md")]:{display:"flex",flexDirection:"column",justifyContent:"center"}})),ur=({displayName:r,userId:t,avatar:i,cover:o})=>n(cr,{children:[n(dr,{children:[e(Ve,{sx:{width:144,height:144},src:i}),n(h,{sx:{ml:{md:3},mt:{xs:1,md:0},color:"common.white",textAlign:{xs:"center",md:"left"}},children:[e(d,{variant:"h4",children:r}),e(d,{sx:{opacity:.72},children:t})]})]}),e(Re,{isLocal:!0,alt:"profile cover",src:ze,sx:{position:"absolute",top:0,left:0,right:0,bottom:0}})]}),Cr=()=>{const r=Te(),{userId:t}=r,{data:{data:i={}}={},isLoading:o,refetch:s}=Ne([te.GetUserProfile,t],()=>Ee(t)),{contact:a,status:l}=i;return n(Me,{title:`User Profile - ${t}`,children:[e(Ge,{heading:"User Profile",links:[{name:"Users"},{name:`Profile - ${t}`}]}),o?e(qe,{}):n(u,{container:!0,spacing:J,children:[e(u,{item:!0,xs:12,children:e(I,{sx:{height:280},children:e(ur,{...i})})}),e(u,{item:!0,xs:12,children:e(rr,{refetch:s,userId:t,status:l})}),e(u,{item:!0,xs:12,md:4,children:e(er,{...i})}),e(u,{item:!0,xs:12,md:8,children:e(sr,{user:i})}),e(u,{item:!0,xs:12,md:12,children:e(or,{...a})})]})]})};export{Cr as default};
