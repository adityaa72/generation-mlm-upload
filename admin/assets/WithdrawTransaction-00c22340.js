import{bn as se,t as d,w as ne,e,z as oe,j as t,P as de,A,p as z,J as h,bB as ce,F as I,D as Q,g as H,Q as le,C as B,bc as k,S as b,L as y,I as q,f as O,bp as he,aQ as W,u as M,d as N,s as V,h as K,i as U,R as Y,m as _,B as J,c as ue,a as me,o as pe,bC as ge,bD as we,bE as fe}from"./index-7ce534fb.js";import{r as $}from"./warn-once-223a138d.js";import{C as S}from"./CurrencyTextField-e9405b16.js";import{F as ye}from"./FormLabel-b1fd6c0d.js";import{H as Ce}from"./HeaderBreadcrumbs-7dcdcbac.js";import{f as w}from"./formatTime-af0276ab.js";import{A as u,a as f}from"./AlertTitle-829aeda4.js";import{C as E}from"./CardHeader-51eb309e.js";import{C as L}from"./CardContent-d5c47145.js";import"./Close-40502a6a.js";const ve=({value:i,label:r,inputType:a,fileExtensions:n,dropdownOptions:s,name:o})=>{switch(a){case"input":return e(W,{disabled:!0,value:i,label:r});case"date":return e(W,{disabled:!0,value:i,label:r});case"dropdown":return e(W,{disabled:!0,value:i,label:r});case"file":return t(z,{children:[e(ye,{label:r}),e(he,{disabled:!0,file:i})]})}},be=({onClose:i,transactionId:r})=>{const a=M(),n=N({defaultValues:{message:""}}),s=V(),{handleSubmit:o,formState:{isSubmitting:c}}=n;return t(K,{methods:n,onSubmit:o(async p=>{try{await ge(r,p),s.removeQueries([d.GetWithdrawDetails,r]),s.removeQueries([d.GetPendingWithdrawHistory]),s.removeQueries([d.GetSuccessWithdrawHistory]),a(A.withdraw.pending)}catch(l){console.log("ðŸš€ ~ file: WithdrawTransaction.jsx:74 ~ approveWithdraw ~ error",l)}}),children:[e(U,{children:e(Y,{multiline:!0,minRows:4,name:"message",label:"Message (optional)"})}),t(_,{children:[e(J,{onClick:i,children:"Cancel"}),e(y,{type:"submit",loading:c,children:"Approve"})]})]})},We=({onClose:i,transactionId:r})=>{const a=M(),n=ue().shape({message:me().required("Message is required")}),s=V(),o=N({defaultValues:{message:""},resolver:pe(n)}),{handleSubmit:c,formState:{isSubmitting:m}}=o;return t(K,{methods:o,onSubmit:c(async l=>{try{await we(r,l),s.removeQueries([d.GetWithdrawDetails,r]),s.removeQueries([d.GetPendingWithdrawHistory]),s.removeQueries([d.GetRejectedWithdrawHistory]),a(A.withdraw.pending)}catch(C){console.log("ðŸš€ ~ file: WithdrawTransaction.jsx:74 ~ approveWithdraw ~ error",C)}}),children:[e(U,{children:e(Y,{multiline:!0,minRows:4,name:"message",label:"Message"})}),t(_,{children:[e(J,{onClick:i,children:"Cancel"}),e(y,{type:"submit",loading:m,children:"Reject"})]})]})},Qe=({breadcrumb:i=!0})=>{const r=se(),{id:a}=r,n=d.GetWithdrawDetails,{data:{data:s={}}={},isLoading:o}=ne([n,a],()=>fe(a)),{amount:c,charge:m,chargeData:p={},createdAt:l,details:C=[],gatewayId:Se,gatewayName:X,netAmount:Z,message:x,status:g,updatedAt:j,userId:D,actionBy:P}=s,{charge:ee,type:te}=p,re=te==="percent"?`(${ee}%)`:"",[ae,F]=$.useState(!1),[ie,R]=$.useState(!1),T=()=>F(!1),G=()=>R(!1);return o?e(oe,{}):t(de,{title:`Withdraw Details #${a}`,children:[i&&e(Ce,{heading:"Withdraw Details",links:[{name:"Withdraws",href:A.withdraw.all},{name:`Withdraw #${a}`}]}),e(z,{children:t(h,{container:!0,spacing:3,children:[t(h,{item:!0,xs:12,children:[P==="admin"?t(u,{severity:"success",children:[e(f,{children:"Withdraw By Admin"}),ce(c)," withdrawn from ",D," on ",w(l)]}):t(I,{children:[g==="pending"&&t(I,{children:[t(Q,{onClose:T,open:ae,children:[e(H,{children:"Accept Withdraw"}),e(be,{transactionId:a,onClose:T})]}),t(Q,{onClose:G,open:ie,children:[e(H,{children:"Reject Withdraw"}),e(We,{transactionId:a,onClose:G})]}),t(u,{severity:"warning",children:[e(f,{children:"Withdraw Pending"}),D," request for withdraw on ",w(l)]})]}),g==="rejected"&&t(u,{severity:"error",children:[e(f,{children:"Withdraw Rejected"}),"You rejected the withdraw on ",w(j)]}),g==="success"&&t(u,{severity:"success",children:[e(f,{children:"Withdraw Success"}),"You approved the withdraw on ",w(j)]})]}),!!x&&e(u,{sx:{mt:le},severity:"info",children:x})]}),P==="user"&&e(h,{item:!0,xs:12,md:6,children:t(B,{children:[e(E,{title:`User ${X} details`}),e(k,{}),e(L,{children:e(b,{spacing:3,children:C.map(v=>e(ve,{value:v.value,...v},v.name))})})]})}),e(h,{sx:{marginInline:"auto"},item:!0,xs:12,md:6,children:t(B,{children:[e(E,{title:"Withdraw Details"}),e(k,{}),e(L,{children:t(b,{spacing:3,children:[e(S,{disabled:!0,value:c,label:"Amount"}),e(S,{disabled:!0,value:m,label:`Withdraw Charge ${re}`}),e(S,{disabled:!0,value:Z,label:"Final Amount"}),g==="pending"&&e(h,{item:!0,xs:12,children:t(b,{justifyContent:"flex-end",direction:"row",spacing:3,children:[e(y,{fullWidth:!0,variant:"contained",color:"error",size:"large",startIcon:e(q,{icon:O.close}),onClick:()=>R(!0),children:"Reject"}),e(y,{fullWidth:!0,variant:"contained",color:"success",size:"large",startIcon:e(q,{icon:O.check}),onClick:()=>F(!0),children:"Approve"})]})})]})})]})})]})})]})};export{Qe as default};
