import{e,R as l,k as I,l as w,I as g,c as C,a as s,cg as B,d as x,t as z,w as G,x as Q,s as R,z as U,j as t,C as P,bc as q,h as v,S,bl as K,aD as E,B as N,L,ch as O,o as T,ci as V,cj as W,P as D,J as p}from"./index-7ce534fb.js";import{r as b}from"./warn-once-223a138d.js";import{H as J}from"./HeaderBreadcrumbs-7dcdcbac.js";import{u as Y}from"./useFormEdit-003d10dc.js";import{C as k}from"./CardHeader-51eb309e.js";import{C as H}from"./CardContent-d5c47145.js";function $({name:i,label:n,...a}){const[r,o]=b.useState(!1);return e(l,{name:i,type:r?"text":"password",label:n,InputProps:{endAdornment:e(I,{position:"end",children:e(w,{"aria-label":"Toggle Password",onClick:()=>{o(!r)},edge:"end",children:r?e(g,{icon:"eva:eye-off-fill"}):e(g,{icon:"eva:eye-fill"})})})},...a})}function X(){const{isEditing:i,startEditing:n,stopEditing:a}=Y(),r=C().shape({encryption:s().required("Mail Encryption is required"),host:s().required("Mail Host is required"),port:s().required("Mail Port is required").test("isNumber","Only numbers are allowed",B),username:s().required("Mail Username is required"),password:s().required("Mail Password is required")}),o={encryption:"",host:"",port:"",username:"",password:""},d=x({resolver:T(r),defaultValues:o,mode:"all"}),{reset:y,handleSubmit:c,formState:{isSubmitting:m}}=d,f=z.GetEmailSetting,M=b.useMemo(()=>({}),[]),{isLoading:F,data:{data:u=M}={}}=G([f],V);b.useEffect(()=>{!Q(u)&&y(u)},[u]);const j=R();return F?e(U,{}):t(P,{children:[e(k,{title:"Email Setting",action:i?void 0:e(w,{onClick:n,children:e(g,{icon:"mdi:lead-pencil"})})}),e(q,{}),e(H,{children:e(v,{methods:d,onSubmit:c(async h=>{try{await O(h),a(),h.port=String(h.port),j.removeQueries([f])}catch(A){console.error(A)}}),children:t(S,{spacing:3,children:[t(K,{disabled:!i,name:"encryption",type:"text",label:"Encryption",children:[e(E,{value:"SSL",children:"SSL"}),e(E,{value:"TLS",children:"TLS"})]}),e(l,{disabled:!i,name:"host",type:"text",label:"Host"}),e(l,{disabled:!i,name:"port",type:"text",label:"Port"}),e(l,{disabled:!i,name:"username",type:"text",label:"Username"}),e($,{disabled:!i,name:"password",label:"Password"}),i&&t(S,{direction:"row",justifyContent:"flex-end",spacing:2,children:[e(N,{size:"large",onClick:a,children:"Cancel"}),e(L,{size:"large",type:"submit",variant:"contained",loading:m,children:"Save Changes"})]})]})})})]})}function Z(){const i=C().shape({email:s().required("Email Address  is required").email("Email Address is not valid")}),n={email:""},a=x({resolver:T(i),defaultValues:n}),{reset:r,handleSubmit:o,formState:{isSubmitting:d}}=a;return t(P,{children:[e(k,{title:"Email Setting",subheader:"You can send a test mail to check if your mail server is working.",sx:{"& .MuiCardHeader-subheader":{color:"info.main"}}}),e(q,{}),e(H,{children:e(v,{methods:a,onSubmit:o(async c=>{try{await W(c)}catch(m){console.error(m)}}),children:t(S,{spacing:3,children:[e(l,{name:"email",type:"email",label:"Email Address"}),e(L,{sx:{marginLeft:"auto !important"},size:"large",type:"submit",variant:"contained",loading:d,children:"Send Email"})]})})})]})}function ne(){return t(D,{title:"Email Setting",children:[e(J,{heading:"Email Setting",links:[{name:"System Configuration"},{name:"Email Setting"}]}),t(p,{container:!0,spacing:3,children:[e(p,{item:!0,xs:12,md:6,children:e(X,{})}),e(p,{item:!0,xs:12,md:6,children:e(Z,{})})]})]})}export{ne as default};
