import{a4 as e,aS as F,w as k,x as g,e as t,aT as A,j as h,C as z,k as G,I as y,aQ as H,aU as Q,p as B}from"./index-7ce534fb.js";import{r as n}from"./warn-once-223a138d.js";import{a as L,D as U,E as C}from"./EmptyContent-22072c99.js";import{C as W}from"./CardHeader-51eb309e.js";const x=({title:r,subheader:u,columns:c,queryKey:i,queryDependency:l=[],queryFunc:a,onGetData:o,sortModel:b})=>{const v=[$(),...c],{sortModel:T,page:w,rowsPerPageOptions:D,pageSize:R,queryOptions:d,localeText:S,onPageChange:E,onPageSizeChange:M,onSortModelChange:O,onFilterModelChange:I,onChangeSearchFilter:p}=L({sortModel:b}),{isLoading:q,isRefetching:j,data:{data:s={}}={},error:f}=k([i,l,d],a?()=>a(d):()=>Q[i](d),{keepPreviousData:!0});n.useEffect(()=>{!g(s)&&o&&o(s)},[s]);const{rows:m,rowCount:N}=g(s)?{rows:[],rowCount:0}:s,P=()=>t(C,{title:"No Search Results Found",element:h(B,{onClick:()=>p(null),sx:{display:"flex",justifyContent:"center",alignItems:"center",gap:2,color:"text.secondary",cursor:"pointer"},children:["Reset Search ",t(y,{icon:"system-uicons:reset-alt"})]})});return f?t(A,{error:f}):h(z,{children:[t(W,{title:r,subheader:u,action:t(K,{placeholder:"Search...",variant:"standard",InputProps:{startAdornment:t(G,{position:"start",children:t(y,{icon:"eva:search-fill",sx:{color:"text.disabled",width:20,height:20}})})},onChange:p})}),t(U,{sx:{"& .MuiDataGrid-virtualScroller":{...!m.length&&{height:"500px !important",pointerEvents:"none"}}},components:{NoRowsOverlay:J,NoResultsOverlay:P},rows:m,rowCount:N,loading:q||j,rowsPerPageOptions:D,pagination:!0,page:w,pageSize:R,paginationMode:"server",sortingMode:"server",filterMode:"server",onPageChange:E,onPageSizeChange:M,sortModel:T,onSortModelChange:O,onFilterModelChange:I,columns:v,localeText:S,autoHeight:!0,density:"comfortable",disableSelectionOnClick:!0})]})};x.propTypes={title:e.string.isRequired,subheader:e.string,columns:e.array.isRequired,queryKey:e.oneOf(F),queryFunc:e.func,onGetData:e.func,queryDependency:e.oneOfType([e.string,e.number,e.object,e.array,e.bool]),sortModel:e.arrayOf(e.shape({field:e.string.isRequired,sort:e.oneOf(["asc","desc"]).isRequired}))};function $(){return{field:"#",sortable:!1,filterable:!1,headerName:"#",maxWidth:50,renderCell:r=>Number(r.api.getRowIndex(r.row.id))+1}}function J(){return t(C,{title:"No Data Found"})}function K({value:r,onChange:u,debounce:c=500,...i}){const[l,a]=n.useState(r);return n.useEffect(()=>{a(r)},[r]),n.useEffect(()=>{const o=setTimeout(()=>{u(l)},c);return()=>clearTimeout(o)},[l]),t(H,{onChange:o=>a(o.target.value),...i})}const V=n.memo(x);export{V as D};
